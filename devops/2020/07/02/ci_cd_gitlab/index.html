<!DOCTYPE html> <html lang=" en "><head> <meta charset="utf-8"> <title>Maria Pantsiou - Software Developer @ARM</title> <meta http-equip="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="description" content="CI/CD on Gitlab" /> <meta name="keywords" content="CI/CD on Gitlab, Maria Pantsiou, devops" /> <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml"> <meta content="" property="fb:app_id"> <meta content="Maria Pantsiou" property="og:site_name"> <meta content="CI/CD on Gitlab" property="og:title"> <meta content="article" property="og:type"> <meta content="CI/CD on Gitlab" property="og:description"> <meta content="/devops/2020/07/02/ci_cd_gitlab/" property="og:url"> <meta content="2020-07-02T09:05:23+00:00" property="article:published_time"> <meta content="/about/" property="article:author"> <meta content="devops" property="article:section"> <meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@"> <meta name="twitter:creator" content="@"> <meta name="twitter:title" content="CI/CD on Gitlab"> <meta content="Maria Pantsiou" property="og:site_name"> <meta name="twitter:url" content="/devops/2020/07/02/ci_cd_gitlab/"> <meta name="twitter:description" content="devlopr-jekyll is a Jekyll Theme Built For Developers"> <link rel="stylesheet" href="/assets/css/main.css" /> <link rel="stylesheet" href="/assets/css/custom-style.css" /> <link rel="stylesheet" href="/assets/bower_components/lightgallery/dist/css/lightgallery.min.css"/> <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.0.0-beta.3/default/snipcart.css" /> <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css"> <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css"> <link rel="stylesheet" href="/assets/bower_components/bootstrap/dist/css/bootstrap.min.css" /> <link rel="stylesheet" href="/assets/bower_components/font-awesome/web-fonts-with-css/css/fontawesome-all.min.css" /> <!-- Fonts--> <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet"> <!-- Favicon --> <link rel="icon" href="/assets/img/favicon.ico" type="image/gif" sizes="16x16"> <!-- Jquery --> <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha384-vk5WoKIaW/vJyUAd9n/wmopsmNhiy+L2Z+SBxGYnUkunIxVxAv/UtMOhba/xskxh" crossorigin="anonymous"></script> <!-- <script src="/assets/bower_components/jquery/dist/jquery.min.js"></script> --> <script src="/assets/bower_components/jquery.easing/jquery.easing.min.js"></script> <script src="/assets/bower_components/bootstrap/dist/js/bootstrap.bundle.min.js"></script> <script src="/assets/bower_components/jquery-mousewheel/jquery.mousewheel.min.js"></script> <script src="/assets/bower_components/lightgallery/dist/js/lightgallery-all.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/picturefill/3.0.2/picturefill.min.js"></script> <script src="/assets/bower_components/imagesloaded/imagesloaded.pkgd.min.js"></script> <script src="/assets/bower_components/nanobar/nanobar.min.js"></script> <script src="/assets/bower_components/typewrite/dist/typewrite.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script> <!-- Github Button --> <script async defer src="https://buttons.github.io/buttons.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script> <script> (function (i, s, o, g, r, a, m) { i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () { (i[r].q = i[r].q || []).push(arguments) }, i[r].l = 1 * new Date(); a = s.createElement(o), m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m) })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga'); ga('create', '', 'auto'); ga('send', 'pageview'); </script> </head> <body> <div class="container-fluid"><header> <div class="col-lg-12"> <div class="row"> <nav class="navbar navbar-expand-lg fixed-top navbar-dark " id="topNav"> <!-- <a class="navbar-brand" href="#">Maria Pantsiou</a> --> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <a class="navbar-brand" href="/">Maria Pantsiou</a> <div class="collapse navbar-collapse" id="navbarNav"> <ul class="navbar-nav"> <li class="nav-item"> <a class="nav-link" href="/about">About Me</a> </li> <li class="nav-item"> <a class="nav-link" href="/blog">Blog</a> </li> </ul> </div> <ul class="nav justify-content-end"> <li class="nav-item"> <a class="nav-link" id="search-icon" href="/search/"><i class="fa fa-search" aria-hidden="true"></i></a> </li> <li class="nav-item"> <input class="nav-link switch" id="theme-toggle" onclick="modeSwitcher() "type="checkbox" name="checkbox" > </li> </ul> </nav> </div> </div> </header><div class="col-lg-12"> <!-- Blog Post Breadcrumbs --><div class="col-lg-12"> <nav aria-label="breadcrumb" role="navigation"> <ol class="breadcrumb"> <li class="breadcrumb-item"> <a href="/blog"><i class="fa fa-home" aria-hidden="true"></i></a> </li> <li class="breadcrumb-item active" aria-current="page"><a href="/devops/2020/07/02/ci_cd_gitlab/">CI/CD on Gitlab</a></li> </ol> </nav> </div> <div class="row" id="blog-post-container"> <div class="col-lg-8 offset-md-2"><article class="card" itemscope itemtype="http://schema.org/BlogPosting"> <div class="card-header"> <!-- <h1 class="post-title" itemprop="name headline">CI/CD on Gitlab</h1> --> <h4 class="post-meta">CI/CD on Gitlab</h4> <p class="post-summary">Posted by : <img src="/assets/img/avatar.png" class="author-profile-img"> <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span itemprop="name">Maria Pantsiou</span> </span> at <time datetime="2020-07-02 09:05:23 +0000" itemprop="datePublished">Jul 2, 2020</time> </p> <span class="disqus-comment-count" data-disqus-identifier="/devops/2020/07/02/ci_cd_gitlab/"></span> <div class="post-categories"> Category : <a href="/blog/categories/devops">devops</a> </div> </div> <div class="card-body" itemprop="articleBody"> <img class="card-img-top" src="/assets/img/posts/synthwave_background.png" alt=""> <br/> <br/> <p>Today’s article is about CI/CD pipelines. I’m writting about this as I wanted to step into the worldCI/CD and as I didn’t have previous experience with this, I wanted to write down some steps and instructions on how to get started. The following article is a summary of things I found interesting and also tried around that concept.</p> <h1 id="gitlab-cicd">Gitlab CI/CD</h1> <h4 id="continuous-integration-ci"><strong>Continuous Integration (CI):</strong></h4> <p>Works to integrate code provided by your team in a shared repository. Developers share the new code in a Merge (Pull) Request or <strong>PR</strong>. The request triggers a pipeline to build, test, and validate the new code prior to merging the changes within your repository.</p> <h4 id="continuous-delivery-cd"><strong>Continuous Delivery (CD):</strong></h4> <p>Ensures the delivery of CI validated code to your application by means of a <strong>structured deployment pipeline</strong>. Deploys the code to your application, code is released to production.</p> <p>All code is tested throughout each stage, ensuring better quality builds and applications with fewer bugs. CI/CD pipelines can determine what happens when builds pass or fail these tests, meaning that errors are identified much faster. CI and CD accelerate how quickly your team delivers results for your customers and stakeholders.</p> <h4 id="the-two-cds-continuous-deliverycontinuous-deployment">The two CDs: <strong>Continuous Delivery/Continuous Deployment:</strong></h4> <p>Continuous deployment means that all validated code deploys to production automatically, whereas continuous delivery means that this code <em>can</em> be deployed. The flexibility for code to be deployed at any time is what differentiates delivery from deployment, and <strong>practicing continuous deployment is possible when continuous delivery is already in place</strong>.</p> <p>An overview of the pipeline:</p> <div align="center"> <img src="/assets/img/posts/ci_cd/cicd_pipeline_infograph.png" alt="cicd_pipeline_infograph" width="1000" height="400" /> </div> <h3 id="why-cicd">Why CI/CD?</h3> <p>There are automated processes involved in a CI/CD pipeline, meaning that there will be less manual tasks, fewer errors, teams are more efficient and spend less time putting out fires. An automated workflow also reduces the chance of human error and improves handoffs.</p> <h3 id="gitlab-cicd-architecture">GitLab CI/CD Architecture</h3> <p><strong>GitLab CI/CD</strong> is a part of GitLab, a web application with an API that stores its state in a database. It manages projects/builds and provides a user interface, besides all the features of GitLab.</p> <p><strong>GitLab Runner</strong> is an application which processes builds. It can be deployed separately and works with GitLab CI/CD through an API.</p> <p>To perform the actual build, you need to install GitLab Runner which is written in Go. It has many features, including autoscaling, great Docker support, and the ability to run multiple jobs concurrently.</p> <p>In GitLab CI/CD, Runners run the code defined in <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code>. A GitLab Runner is a lightweight, highly-scalable agent that picks up a CI job through the coordinator API of GitLab CI/CD, runs the job, and sends the result back to the GitLab instance. Runners are created by an administrator and are visible in the GitLab UI. Runners can be specific to certain projects or available to all projects.</p> <p>There are three types of runners (I won’t cover the details of the types now, but you can find more information <a href="https://docs.gitlab.com/ee/ci/runners/">here</a>):</p> <ul> <li>Shared (for all projects)</li> <li>Group (for all projects in a group)</li> <li>Specific (for specific projects)</li> </ul> <p>Below you’ll find the instructions on how to enable a runner on a specific project.</p> <h2 id="getting-started-with-gitlab-cicd">Getting Started with GitLab CI/CD</h2> <p>To start with CI/CD we need to set up a runner. Runners run the code defined in <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code>. If there is no <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> file in your project you won’t be able to complete the seps above. Just click on the <strong>Add CI/CD</strong> button in your projects gitlab page to create one. Alternativelly, you can create the file manually under your repository’s root directory.</p> <h3 id="set-up-gitlab-runner-on-ubuntu-1804">Set Up GitLab Runner on Ubuntu 18.04</h3> <p>Runner are cross-platform, so they can be installed in any OS. Here I follow the GNU/Linux istructions and I install GitLab Runner on an Ubuntu 18.04:</p> <ol> <li> <h4 id="download-the-latest-file">Download the latest file</h4> <p>See the latest release <a href="https://gitlab-runner-downloads.s3.amazonaws.com/latest/index.html">here</a>. The one I’m using is the 13.1.1:</p> </li> </ol> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-LJO</span> https://s3.amazonaws.com/gitlab-runner-downloads/master/deb/gitlab-runner_amd64.deb
</code></pre></div></div> <ol> <li> <h4 id="install-it">Install it:</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dpkg <span class="nt">-i</span> gitlab-runner_amd64.deb
</code></pre></div> </div> </li> <li> <h4 id="register-the-runner">Register the Runner:</h4> </li> </ol> <p>This step requires an account set up and project already on gitlab.</p> <p>To register the runner, we need to create a specific runner to obtain a token (via GitLab’s interface):</p> <ul> <li> <p>Go to the project’s <strong>Settings &gt; CI/CD</strong> and expand the Runners section (Under <em>Set up a specific Runner manually</em> you’ll find a <em>URL</em> and a <em>registration token</em>)</p> </li> <li>Note the URL and token</li> <li>Register the Runner by following the next steps:</li> </ul> <p>On your terminal run the command:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>gitlab-runner register
</code></pre></div></div> <p>You will be prompt with the following:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Please enter the gitlab-ci coordinator URL <span class="o">(</span>e.g. https://gitlab.com/<span class="o">)</span>:
https://gitlab.com/
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Please enter the gitlab-ci token <span class="k">for </span>this runner:
&lt;token from previous step&gt;
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Please enter the gitlab-ci description <span class="k">for </span>this runner:
test-runner
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Please enter the gitlab-ci tags <span class="k">for </span>this runner <span class="o">(</span>comma separated<span class="o">)</span>:
test-runner-tag 

Registering runner... succeeded
<span class="nv">runner</span><span class="o">=</span>&lt;runner-number&gt;
</code></pre></div></div> <p>I’m currently on a VM, so for the next one I choose the virtualbox option:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Please enter the executor: docker, docker-ssh, virtualbox, docker+machine, kubernetes, custom, parallels, shell, ssh, docker-ssh+machine:
virtualbox
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Please enter the VirtualBox VM <span class="o">(</span>e.g. my-vm<span class="o">)</span>:
my_vm_name
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Please enter the SSH user <span class="o">(</span>e.g. root<span class="o">)</span>:
root
</code></pre></div></div> <p>You’ll find the SSH key on GitLab, under User Settings &gt; SSH Keys:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Please enter the SSH password <span class="o">(</span>e.g. docker.io<span class="o">)</span>:
&lt;my-ssh-public-key-for-gitlab&gt;
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Please enter path to SSH identity file <span class="o">(</span>e.g. /home/user/.ssh/id_rsa<span class="o">)</span>:
&lt;my-ssh-file-path&gt;
</code></pre></div></div> <p>You should now see the message:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Runner registered successfully. Feel free to start it, but if it's running already the config should be automatically reloaded!
</code></pre></div></div> <p>You can also use the following command that includes most of the above:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>gitlab-runner register <span class="nt">-n</span> <span class="se">\</span>
  <span class="nt">--url</span> https://gitlab.com/ <span class="se">\</span>
  <span class="nt">--registration-token</span> REGISTRATION_TOKEN <span class="se">\</span>
  <span class="nt">--executor</span> shell <span class="se">\</span>
  <span class="nt">--description</span> <span class="s2">"My Runner"</span>
</code></pre></div></div> <p>Next, I enable the Runner for the project. You must have Owner permissions for the project and the specific Runner must not be <a href="https://docs.gitlab.com/ee/ci/runners/#prevent-a-specific-runner-from-being-enabled-for-other-projects">locked</a>.</p> <p>To enable or disable a specific Runner for a project:</p> <ul> <li>Go to the project’s <strong>Settings &gt; CI/CD</strong> and expand the Runners section</li> <li>Click <strong>Enable for this project</strong></li> </ul> <p>To prevent a specific Runner from being enabled for other projects you can lock a Runner:</p> <ul> <li>Go to the project’s <strong>Settings &gt; CI/CD</strong> and expand the Runners section.</li> <li>Find the Runner you want to lock or unlock. Make sure it’s enabled.</li> <li>Click the <strong>pencil button</strong>.</li> <li><strong>Check the Lock</strong> to current projects option.</li> <li>Click <strong>Save changes</strong></li> </ul> <p>To see the configured runners on your machine run:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>gitlab-runner list
</code></pre></div></div> <h3 id="how-to-write-the-gitlab-ciyml-file">How to write the <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> file</h3> <h4 id="notes">Notes:</h4> <ol> <li>Gitlab server will automatically deligate a (shared) GitLab Runner to download a <strong>Docker container and image</strong>, <strong>execute the steps</strong> of the process and makes sure it <strong>saves</strong> any <code class="language-plaintext highlighter-rouge">artifacts</code> (mentioned later) for the <code class="language-plaintext highlighter-rouge">jobs</code> to be completed, just by having a <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> file in the root difrectory of your project. After the process sucesses it deleted the image. If we register a runner to our project, it will run locally instead using docker.</li> <li>The .gitlab-ci.yml file tells the GitLab Runner what to do. A simple pipeline commonly has three stages:</li> </ol> <ul> <li>build</li> <li>test</li> <li>deploy <ol> <li>The pipeline appears under the project’s <strong>CI/CD &gt; Pipelines</strong> page. If everything runs OK (no non-zero return values), you get a green check mark associated with the commit. Many projects use GitLab’s CI service to run the test suite, so developers get immediate feedback if they broke something.</li> <li>Because <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> is in the repository and is version controlled, old versions still build successfully, forks can easily make use of CI, branches can have different pipelines and jobs, and you have a single source of truth for CI.</li> <li>On any push to your repository, GitLab will look for the <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> file and start jobs on Runners according to the contents of the file, for that commit.</li> <li><code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> is a YAML file so you have to pay extra attention to indentation. Always use spaces, not tabs</li> <li>The pipeline automatically runs everytime a commit happend (or a change is saved from the gitlab UI).</li> <li>We can specify to our runner which Docker image to use that contains all the packages that out code will need to build.</li> </ol> </li> </ul> <h4 id="elements-of-a-gitlab-ciyml-file">Elements of a <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> file</h4> <p>The <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> file defines sets of jobs with constraints of <strong>how</strong> and <strong>when</strong> they should be run. The <strong>jobs</strong> are defined as <strong>top-level elements with a name</strong> (in our case <code class="language-plaintext highlighter-rouge">test</code>, <code class="language-plaintext highlighter-rouge">run</code> and <code class="language-plaintext highlighter-rouge">pages</code>) and always have to contain the <code class="language-plaintext highlighter-rouge">script</code> keyword. Jobs are used to create jobs, which are then picked by Runners and executed within the environment of the Runner.</p> <p>This is the simplest possible configuration:</p> <ol> <li>Define two jobs <code class="language-plaintext highlighter-rouge">test</code> and <code class="language-plaintext highlighter-rouge">run</code> (the names are arbitrary) with different commands to be executed</li> <li>Before every job, the commands defined by <code class="language-plaintext highlighter-rouge">before_script</code> are executed</li> </ol> <p>If you want to check whether the .gitlab-ci.yml of your project is valid, there is a Lint tool under the page /-/ci/lint of your project namespace. You can also find a <strong>CI Lint</strong> button to go to this page under <strong>CI/CD ➔ Pipelines</strong> and <strong>Pipelines ➔ Jobs</strong> in your project.</p> <h5 id="stages">stages:</h5> <p>We define the jobs that we want our pipeline to perform. Usually is <code class="language-plaintext highlighter-rouge">build</code> and <code class="language-plaintext highlighter-rouge">test</code>.</p> <h5 id="build">build:</h5> <p>We define what the job <code class="language-plaintext highlighter-rouge">build</code> will do, by writing a <code class="language-plaintext highlighter-rouge">script</code> with commands underneeth it.</p> <h5 id="test">test:</h5> <p>We define what the job <code class="language-plaintext highlighter-rouge">test</code> will do, again, by writing a <code class="language-plaintext highlighter-rouge">script</code> with commands underneeth it. Usually, a <code class="language-plaintext highlighter-rouge">test</code> job tests if the build steps were completed successfully, but we need to define those testing steps. It can also run any tests we have in place in our code.</p> <h5 id="artifacts">artifacts</h5> <p>Each job is run independently from each other. <strong>Under <code class="language-plaintext highlighter-rouge">build</code></strong> we can define <code class="language-plaintext highlighter-rouge">artifacts</code> so the jobs can communicate with each other, otherwise any job performed during the <code class="language-plaintext highlighter-rouge">build</code> would be discarded before the test job. With the <code class="language-plaintext highlighter-rouge">artifact</code>, the jobs knows what to save, like files or folders created during the <code class="language-plaintext highlighter-rouge">build</code> stage. They defined by paths.</p> <h5 id="debugging">debugging</h5> <p>If the test job fails we can include debugging commands under the <code class="language-plaintext highlighter-rouge">test</code> stage that can print out results from the previous commands so we check what those outputs are at the logs in the gitlab UI for that particular test job.</p> <p>The following is the template <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> file for python:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># This file is a template, and might need editing before it works on your project.</span>
<span class="c1"># Official language image. Look for the different tagged releases at:</span>
<span class="c1"># https://hub.docker.com/r/library/python/tags/</span>
<span class="na">image</span><span class="pi">:</span> <span class="s">python:latest</span>

<span class="c1"># Change pip's cache directory to be inside the project directory since we can</span>
<span class="c1"># only cache local items.</span>
<span class="na">variables</span><span class="pi">:</span>
  <span class="na">PIP_CACHE_DIR</span><span class="pi">:</span> <span class="s2">"</span><span class="s">$CI_PROJECT_DIR/.cache/pip"</span>

<span class="c1"># Pip's cache doesn't store the python packages</span>
<span class="c1"># https://pip.pypa.io/en/stable/reference/pip_install/#caching</span>
<span class="c1">#</span>
<span class="c1"># If you want to also cache the installed packages, you have to install</span>
<span class="c1"># them in a virtualenv and cache it as well.</span>
<span class="na">cache</span><span class="pi">:</span>
  <span class="na">paths</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">.cache/pip</span>
    <span class="pi">-</span> <span class="s">venv/</span>

<span class="na">before_script</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">python -V</span>               <span class="c1"># Print out python version for debugging</span>
  <span class="pi">-</span> <span class="s">pip install virtualenv</span>
  <span class="pi">-</span> <span class="s">virtualenv venv</span>
  <span class="pi">-</span> <span class="s">source venv/bin/activate</span>

<span class="na">test</span><span class="pi">:</span>
  <span class="na">script</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">python setup.py test</span>
  <span class="pi">-</span> <span class="s">pip install tox flake8</span>  <span class="c1"># you can also use tox</span>
  <span class="pi">-</span> <span class="s">tox -e py36,flake8</span>

<span class="na">run</span><span class="pi">:</span>
  <span class="na">script</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">python setup.py bdist_wheel</span>
  <span class="c1"># an alternative approach is to install and run:</span>
  <span class="pi">-</span> <span class="s">pip install dist/*</span>
  <span class="c1"># run the command here</span>
  <span class="na">artifacts</span><span class="pi">:</span>
    <span class="na">paths</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">dist/*.whl</span>

<span class="na">pages</span><span class="pi">:</span>
  <span class="na">script</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">pip install sphinx sphinx-rtd-theme</span>
  <span class="pi">-</span> <span class="s">cd doc ; make html</span>
  <span class="pi">-</span> <span class="s">mv build/html/ ../public/</span>
  <span class="na">artifacts</span><span class="pi">:</span>
    <span class="na">paths</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">public</span>
  <span class="na">only</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">master</span>
</code></pre></div></div> <p>Notes:</p> <ol> <li>To see the GitLab logs on your marchine: <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/var/log/syslog
</code></pre></div> </div> </li> <li>If you want tthe runner to run everything inside a docker container, then When register a runner choose <code class="language-plaintext highlighter-rouge">docker</code> as the <code class="language-plaintext highlighter-rouge">executor</code></li> </ol> <p>For more information and a complete <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> syntax, please read the <a href="https://docs.gitlab.com/ee/ci/yaml/README.html">reference documentation</a> on <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code>.</p> <p>Read more on how to get started with GitLab and Kubernetes <a href="https://about.gitlab.com/blog/2020/07/06/beginner-guide-ci-cd/">here</a>.</p> <p><em>sources:</em></p> <ol> <li><a href="https://about.gitlab.com/ci-cd/">Continuous integration and delivery</a></li> <li><a href="https://about.gitlab.com/stages-devops-lifecycle/continuous-integration/">GitLab Continuous Integration (CI) &amp; Continuous Delivery (CD)</a></li> <li><a href="https://docs.gitlab.com/ee/ci/docker/using_docker_build.html">Building Docker images with GitLab CI/CD </a></li> <li><a href="https://docs.gitlab.com/runner/install/">Install GitLab Runner</a></li> <li><a href="https://docs.gitlab.com/runner/install/linux-manually.html">Install GitLab Runner manually on GNU/Linux</a></li> <li><a href="https://docs.gitlab.com/ee/ci/runners/">Configuring GitLab Runners</a></li> <li><a href="https://docs.gitlab.com/ee/ci/quick_start/">Getting started with GitLab CI/CD</a></li> <li><a href="https://www.udemy.com/course/gitlab-ci-pipelines-ci-cd-and-devops-for-beginners/">GitLab CI: Pipelines, CI/CD and DevOps for Beginners</a></li> </ol> </div> <div id="disqus_thread"></div> </article> <script> var disqus_config = function () { this.page.url = "/devops/2020/07/02/ci_cd_gitlab/"; /* Replace PAGE_URL with your page's canonical URL variable */ this.page.identifier = "/devops/2020/07/02/ci_cd_gitlab"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */ }; (function () { /* DON'T EDIT BELOW THIS LINE */ var d = document, s = d.createElement('script'); s.src = 'https://.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a> </noscript></div> </div> <!-- End of row--> <div class="row"> <div class="col-md-4"> <div class="card"> <div class="card-header"> About </div> <div class="card-body"> <!-- Your Bio --> <p class="author_bio"> Hello, My Name is Maria.</p> </div> </div> </div> <div class="col-md-4"> <div class="card"> <div class="card-header">Categories </div> <div class="card-body text-dark"> <div id="#guides"></div> <li class="tag-head"> <a href="/blog/categories/guides">guides</a> </li> <a name="guides"></a> <div id="#dataScience"></div> <li class="tag-head"> <a href="/blog/categories/dataScience">dataScience</a> </li> <a name="dataScience"></a> <div id="#devops"></div> <li class="tag-head"> <a href="/blog/categories/devops">devops</a> </li> <a name="devops"></a> <div id="#resources"></div> <li class="tag-head"> <a href="/blog/categories/resources">resources</a> </li> <a name="resources"></a> <div id="#AI"></div> <li class="tag-head"> <a href="/blog/categories/AI">AI</a> </li> <a name="AI"></a> </div> </div> </div> <div class="col-md-4"> <div class="card"> <div class="card-header">Useful Links </div> <div class="card-body text-dark"> <li > <a href="/about">About Me</a> </li> <li > <a href="/blog">Blog</a> </li> </div> </div> </div> </div> </div> </div> <footer> <p> Powered by<a href="https://github.com/sujaykundu777/devlopr-jekyll"> devlopr jekyll</a>. Hosted at <a href="https://pages.github.com">Github</a>. Subscribe via <a href=" /feed.xml ">RSS</a> </p> </footer> </div> <script> var options = { classname: 'my-class', id: 'my-id' }; var nanobar = new Nanobar( options ); nanobar.go( 30 ); nanobar.go( 76 ); nanobar.go(100); </script> <div hidden id="snipcart" data-api-key="Y2I1NTAyNWYtMTNkMy00ODg0LWE4NDItNTZhYzUxNzJkZTI5NjM3MDI4NTUzNzYyMjQ4NzU0"></div> <script src="https://cdn.snipcart.com/themes/v3.0.0-beta.3/default/snipcart.js" defer></script> <script src="/assets/js/mode-switcher.js"></script> </body> </html>
